"use strict";(self.webpackChunkBeat_Blade_yarn_edition=self.webpackChunkBeat_Blade_yarn_edition||[]).push([[684],{848:(e,t,s)=>{function n(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}s.r(t),s.d(t,{default:()=>a});class i{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:4;n(this,"subElements",{}),n(this,"start",void 0),n(this,"score",0),n(this,"onStart",e=>{this.startGame()}),n(this,"onStop",e=>{this.stopGame()}),n(this,"onPick",e=>{const{success:t,failure:s}=this.subElements;if(e.target.classList.contains("beadBlade__goblin")){this.score+=1,t.textContent=this.score;const e=this.getRandomIntInclusive(this.size*this.size);if(this.subElements[e].append(this.subElements.goblin),5===this.score)return alert("you are win");clearInterval(this.start),this.startGame()}else if(this.fail-=1,s.textContent=this.fail,0===this.fail)return this.stopGame(),alert("you are lose")}),this.size=e>=4?e:4,this.score=0,this.fail=5,this.render()}render(){const e=document.createElement("div");e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.subElements=this.getSubElements(),this.initEventListeners()}initEventListeners(){const{startGame:e,stopGame:t,cells:s}=this.subElements;e.addEventListener("click",this.onStart),t.addEventListener("click",this.onStop),s.addEventListener("click",this.onPick)}update(e){const{body:t}=this.subElements;this.stopGame(),this.size=e,t.innerHTML=this.getBody(),this.subElements=this.getSubElements(),this.initEventListeners()}startGame(e){const{goblin:t}=this.subElements;t.classList.contains("beadBlade__img-hidden")&&t.classList.remove("beadBlade__img-hidden"),this.start=setInterval(()=>{const e=this.getRandomIntInclusive(this.size*this.size);this.subElements[e].append(this.subElements.goblin)},1e3)}stopGame(){const{success:e,failure:t}=this.subElements;this.fail=5,this.score=0,e.textContent=this.score,t.textContent=this.score,this.subElements.goblin.classList.add("beadBlade__img-hidden"),clearInterval(this.start)}getRandomIntInclusive(e){let t=Math.ceil(0);return e=Math.floor(e-1),Math.floor(Math.random()*(e-t+1))+t}getSubElements(){const e=this.element.querySelectorAll("[data-element]");for(const t of e)this.subElements[t.dataset.element]=t;return this.subElements}getCell(e){const t=[];for(let n=0;n<e;n++)t.push(0===(s=n)?`<div class="beadBlade__cell" data-element="${s}">\n                    <div class="beadBlade__img beadBlade__img-hidden" data-element="goblin">\n                        <img src="./assets/favicon/goblin.png" alt="goblin" class="beadBlade__goblin">\n                    </div>\n                 </div>`:`<div class="beadBlade__cell" data-element="${s}"></div>`);var s;return t.join("")}getBody(){return`<div class="beadBlade" style="width: ${160*this.size}px">\n        <div class="beadBlade__cells" data-element="cells">\n        ${this.getCell(this.size*this.size)}\n        </div>\n </div>`}getTemplate(){return`<div>\n        <button  class="button button_secondary" data-element="startGame">\n        Start\n     </button>\n     <button class="button button_secondary" data-element="stopGame">\n         Stop\n     </button>\n     <div class="score score_success" data-element="success">0</div>\n     <div class="score score_failure" data-element="failure">5</div>\n        <div data-element="body">\n                ${this.getBody()}\n        </div>\n    </div>`}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,this.subElements=null}}function l(e,t,s){return t in e?Object.defineProperty(e,t,{value:s,enumerable:!0,configurable:!0,writable:!0}):e[t]=s,e}class a{constructor(){l(this,"subElements",{}),l(this,"components",{}),l(this,"onChangeSize",e=>{this.components.beadBlade.update(e.target.value)})}render(){const e=document.createElement("div");return e.innerHTML=this.getTemplate(),this.element=e.firstElementChild,this.subElements=this.getSubElements(),console.log("gdhkjhdgkj"),this.initComponents(),this.renderComponents(),this.initEventListeners(),this.element}initComponents(){const e=new i;this.components={beadBlade:e}}renderComponents(){Object.keys(this.components).forEach(e=>{const t=this.subElements[e],{element:s}=this.components[e];t.append(s)})}initEventListeners(){this.element.querySelectorAll('input[name="size"]').forEach(e=>{e.addEventListener("change",this.onChangeSize)})}getSubElements(){const e=this.element.querySelectorAll("[data-element]");for(const t of e)this.subElements[t.dataset.element]=t;return this.subElements}removeEventListeners(){this.removeEventListeners()}remove(){this.element&&this.element.remove()}destroy(){this.remove(),this.element=null,this.subElements=null;for(const e of Object.values(this.components))e.destroy()}getTemplate(){return'\n        <div data-element="beadBlade">\n        \n        <div data-element="beadBlade">\n\n        <input type="radio" id="contactChoice1"\n         name="size" value="4">\n        <label for="contactChoice1">4</label>\n    \n        <input type="radio" id="contactChoice2"\n         name="size" value="5">\n        <label for="contactChoice2">5</label>\n    \n        <input type="radio" id="contactChoice3"\n         name="size" value="6">\n        <label for="contactChoice3">6</label>\n\n        </div>\n    </div>\n        '}}}}]);
//# sourceMappingURL=game-index-js-684.js.map